<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Skill Explainer - EduRise</title>
  <link rel="stylesheet" href="/css/tailwind-input.css">
  <link rel="stylesheet" href="/css/styles.css">
  <script src="/js/config.js"></script>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 min-h-screen">
  <div data-include="header"></div>

  <main class="container mx-auto px-4 py-8 max-w-4xl">
    <div class="mb-8">
      <h1 class="text-4xl font-bold mb-2">Skill Explainer</h1>
      <p class="text-lg text-gray-600 dark:text-gray-400">Get clear explanations of any skill or concept</p>
    </div>

    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-6">
      <div class="mb-4">
        <label for="skill-input" class="block mb-2 font-semibold">What skill would you like explained?</label>
        <input 
          type="text" 
          id="skill-input" 
          class="w-full px-4 py-2 border rounded-lg bg-white dark:bg-gray-700"
          placeholder="e.g., JavaScript, Python, React, Machine Learning, System Design"
        >
      </div>
      <button id="explain-skill" class="w-full px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold">
        Explain Skill
      </button>
    </div>

    <div id="explanation-result" class="hidden">
      <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
        <h2 class="text-2xl font-bold mb-4">Explanation</h2>
        <div id="explanation-content" class="prose dark:prose-invert max-w-none">
          <!-- Explanation loaded here -->
        </div>
      </div>
    </div>

    <div id="loading" class="hidden text-center py-8">
      <div class="spinner inline-block"></div>
      <p class="mt-4">Generating explanation...</p>
    </div>
  </main>

  <div data-include="footer"></div>
  <script src="/js/include.js" defer></script>
  <script src="/js/gemini.js"></script>
  <script>
    document.getElementById('explain-skill').addEventListener('click', async () => {
      const skill = document.getElementById('skill-input').value.trim();
      if (!skill) {
        alert('Please enter a skill name');
        return;
      }

      document.getElementById('loading').classList.remove('hidden');
      document.getElementById('explanation-result').classList.add('hidden');

      try {
        let explanation = '';
        
        // Try Gemini API first
        if (window.GeminiAPI && window.GeminiAPI.isConfigured()) {
          explanation = await window.GeminiAPI.explainSkill(skill);
        } else {
          // Fallback explanation
          explanation = generateFallbackExplanation(skill);
        }

        displayExplanation(explanation);
      } catch (error) {
        console.error('Error explaining skill:', error);
        displayExplanation(generateFallbackExplanation(skill));
      } finally {
        document.getElementById('loading').classList.add('hidden');
      }
    });

    function generateFallbackExplanation(skill) {
      const lower = skill.toLowerCase();
      if (lower.includes('javascript')) {
        return `JavaScript: A Programming Language

Definition:
JavaScript is a high-level, interpreted programming language primarily used for web development. It enables interactive web pages and is an essential part of web applications.

Key Uses:
- Frontend web development (React, Vue, Angular)
- Backend development (Node.js)
- Mobile app development (React Native)
- Browser automation and scripting

Learning Path:
1. Basics: Variables, functions, data types
2. DOM manipulation
3. ES6+ features (arrow functions, promises, async/await)
4. Frameworks and libraries
5. Advanced concepts (closures, prototypes)

Time Estimate:
- Basics: 2-4 weeks
- Intermediate: 2-3 months
- Advanced: 6-12 months`;
      } else if (lower.includes('python')) {
        return `Python: A Versatile Programming Language

Definition:
Python is a high-level, interpreted programming language known for its simplicity and readability. It's widely used in web development, data science, AI, and automation.

Key Uses:
- Web development (Django, Flask)
- Data science and analytics
- Machine learning and AI
- Automation and scripting
- Scientific computing

Learning Path:
1. Basics: Syntax, data types, control flow
2. Functions and modules
3. Object-oriented programming
4. Libraries (NumPy, Pandas, etc.)
5. Specialization (web, data, ML)

Time Estimate:
- Basics: 2-3 weeks
- Intermediate: 2-4 months
- Advanced: 6-12 months`;
      } else {
        return `${skill}: Overview

Definition:
${skill} is an important skill/concept in modern technology and development.

Key Concepts:
- Core principles and fundamentals
- Practical applications
- Industry best practices

Learning Path:
1. Start with basics
2. Practice with projects
3. Explore advanced topics
4. Build real-world applications

Time Estimate:
- Beginner: 1-2 months
- Intermediate: 3-6 months
- Advanced: 6-12 months`;
      }
    }

    function displayExplanation(explanation) {
      const content = document.getElementById('explanation-content');
      content.innerHTML = `<div class="whitespace-pre-line">${escapeHtml(explanation)}</div>`;
      document.getElementById('explanation-result').classList.remove('hidden');
    }

    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }
  </script>
</body>
</html>
